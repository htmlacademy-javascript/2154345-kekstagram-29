(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const g of d.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function s(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(a){if(a.ep)return;a.ep=!0;const d=s(a);fetch(a.href,d)}})();const mt=(t,e)=>{const s=Math.ceil(Math.min(t,e)),o=Math.floor(Math.max(t,e)),a=Math.random()*(o-s+1)+s;return Math.floor(a)},hr=()=>{const t=[];let e=mt(1,24);for(;t.length<10;)t.includes(e)||t.push(e),e=mt(0,24);return t},Ze=t=>t.key==="Escape",ve=t=>{const e=document.querySelector(`#${t}`);if(e===null)throw new Error(`Template with id ${t} not found`);const s=e.content.firstElementChild;if(s===null)throw new Error(`Template with id ${t} not found`);return s},te=(t,e,s,o)=>{s||(s=t.classList[0]);let a;if(o?a=t.querySelector(`.${s}__${e}--${o}`):a=t.querySelector(`.${s}__${e}`),a===null)throw new Error(`Element ${e} not found in block ${s}`);return a},yt=(t,e,s)=>{const o=document.createDocumentFragment();t.forEach(a=>o.append(s(a))),e.append(o)},_e=(t,e=!0)=>{t.classList.toggle("hidden",!e),document.body.classList.toggle("modal-open",e)};function pr(t,e=500){let s;return(...o)=>{clearTimeout(s),s=setTimeout(()=>t.apply(this,o),e)}}const Ct=document.querySelector(".social__comment-count"),xe=document.querySelector(".social__comments-loader"),vr=ve("comment"),ye=document.querySelector(".social__comments"),gr=5;if(!xe||!ye||!Ct||!ye)throw new Error("Critical elements for comments were not found");const Sr=({avatar:t,name:e,message:s})=>{const o=vr.cloneNode(!0),a=te(o,"picture","social"),d=te(o,"text","social");return a.src=t,a.alt=e,d.textContent=s,o};let le=0,Be=[];xe.addEventListener("click",()=>{const t=Be.length,e=Math.min(le+gr,t),s=Be.slice(le,e);yt(s,ye,Sr),le=e,Ct.textContent=`${le} из ${t} комментариев`;const o=le>=t;xe.hidden=o});const Er=t=>{Be=t,xe.click()},At=()=>{ye.innerHTML="",le=0};At();const ie=document.querySelector(".big-picture"),_t=document.querySelector(".big-picture__cancel");if(!ie||!_t)throw new Error("Critical. Big picture or close button were not found.");const Pt=ie.querySelector(".big-picture__img img"),Lt=ie.querySelector(".likes-count"),Tt=ie.querySelector(".comments-count"),Dt=ie.querySelector(".social__caption"),br=document.querySelector(".social__comments-loader");if(!Pt||!Lt||!Tt||!Dt||!br)throw new Error("Critical big picture elements were not found.");const wr=({url:t,description:e,likes:s,comments:o})=>{Pt.src=t,Lt.textContent=s.toString(),Tt.textContent=o.length.toString(),Dt.textContent=e,Er(o)},xr=t=>{_e(ie),wr(t),document.addEventListener("keydown",Ot)},kt=()=>{_e(ie,!1),At(),document.removeEventListener("keydown",Ot)};_t.addEventListener("click",kt);function Ot(t){Ze(t)&&(t.preventDefault(),kt())}const Vt=document.querySelector(".pictures"),Mt=ve("picture");if(!Vt||!Mt)throw new Error("Critical. Picture elements not found.");const yr=({url:t,description:e,likes:s,comments:o})=>{const a=Mt.cloneNode(!0),d=te(a,"img");if(!d)throw new Error("Critical. Picture elements not found.");return d.src=t,d.alt=e,te(a,"likes").textContent=s.toString(),te(a,"comments").textContent=o.length.toString(),a},ht=t=>yt(t,Vt,e=>{const s=yr(e);return s.addEventListener("click",()=>xr(e)),s}),Rt="https://29.javascript.pages.academy/kekstagram",qt={GET:"GET",POST:"POST"},Ft={GET_DATA:"/data",SEND_DATA:"/"},Ut={GET_DATA:"Не получилось загрузить изображение. Попробуйте обновить страницу",SEND_DATA:"Не получилось отправить форму. Попробуйте ещё раз"},Cr={url:Rt,route:Ft.GET_DATA,errorText:Ut.GET_DATA,options:{method:qt.GET}},Ar={url:Rt,route:Ft.SEND_DATA,errorText:Ut.SEND_DATA,options:{method:qt.POST}},Ht=({url:t,route:e,errorText:s,options:{method:o}},a)=>fetch(`${t}${e}`,{method:o,body:a}).then(d=>{if(!d.ok)throw new Error;return d.json()}).catch(()=>{throw new Error(s)}),_r=()=>Ht(Cr),Pr=t=>Ht(Ar,t),Lr=ve("data-error"),Tr=ve("error"),Dr=ve("success"),je={buttonRemoveTemplate:t=>{t.remove()},buttonReloadPage:()=>{location.reload()}},Ie=(t,e,s)=>({name:t,template:e,buttonAction:s}),kr={error:Ie("error",Tr,je.buttonRemoveTemplate),success:Ie("success",Dr,je.buttonRemoveTemplate),dataError:Ie("data-error",Lr,je.buttonReloadPage)},Ge=t=>{const e=kr[t],s=e.template,o=e.buttonAction;document.body.append(s),document.body.classList.add("modal-open"),document.addEventListener("click",a=>{const d=a.target;[`${e.name}`,`${e.name}__button`].includes(d.getAttribute("class"))&&o(s)}),document.addEventListener("keydown",a=>{Ze(a)&&o(s)})},me=document.querySelector(".img-filters"),Or=me.querySelector("#filter-default"),Vr=me.querySelector("#filter-random"),Mr=me.querySelector("#filter-discussed"),Rr=({comments:t},{comments:e})=>e.length-t.length,qr=t=>t,Fr=t=>{const e=hr();return t.filter(({id:o})=>e.includes(o))},Ur=t=>t.slice().sort(Rr),Hr={default:qr,random:Fr,discussed:Ur},Nr=t=>{const e=t.target;[Or,Vr,Mr].forEach(s=>{s.classList.remove("img-filters__button--active")}),e.classList.add("img-filters__button--active")},zr=(t,e)=>{me.classList.remove("img-filters--inactive");const s=o=>{const a=o.target;if(!(a.classList[0]!=="img-filters__button"||a.classList.length<2))return;Nr(o);const P=o.target.getAttribute("id").split("-")[1],v=Hr[P],N=v(e);document.querySelectorAll(".picture").forEach(G=>G.remove()),t(N)};me.addEventListener("click",s)},H=document.querySelector(".img-upload__form"),Ye=H.querySelector(".img-upload__overlay"),ce=document.querySelector(".img-upload__preview img"),Je=document.querySelector(".effects__list"),$r=Je.querySelectorAll(".effects__preview"),Nt=document.querySelector(".img-upload__effect-level"),zt=document.querySelector(".effect-level__slider"),he=H==null?void 0:H.querySelector(".img-upload__submit");if(!H||!Ye||!ce||!zt||!he)throw new Error("Form or her critical elements were not found.");const Qe=document.querySelector(".scale"),jr=te(Qe,"control","scale","smaller"),Ir=te(Qe,"control","scale","bigger"),$t=te(Qe,"control","scale","value"),Br=(t,e=!0)=>e?Math.max(.25,t-.25):Math.min(1,t+.25),Gr=t=>{ce.style.transform=`scale(${t})`,$t.value=`${t*100}%`},Kr=()=>{ce.style.removeProperty("transform")},jt=(t=!0)=>{const e=parseInt($t.value,10)/100,s=Br(e,t);Gr(s)};jr.addEventListener("click",()=>{jt(!0)});Ir.addEventListener("click",()=>{jt(!1)});var Xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var It={exports:{}};(function(t,e){(function(s,o){t.exports=o()})(Xr,function(){var s={en:{required:"This field is required",email:"This field requires a valid e-mail address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format",equals:"The two fields do not match",default:"Please enter a correct value"}};function o(w,p){for(;(w=w.parentElement)&&!w.classList.contains(p););return w}function a(w){var p=arguments;return this.replace(/\${([^{}]*)}/g,function(A,h){return p[h]})}function d(w){return w.pristine.self.form.querySelectorAll('input[name="'+w.getAttribute("name")+'"]:checked').length}function g(w,p){for(var A in p)A in w||(w[A]=p[A]);return w}var P={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},v="pristine-error",N="input:not([type^=hidden]):not([type^=submit]), select, textarea",G=["required","min","max","minlength","maxlength","pattern"],R=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,C=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,F="en",k={},L=function(p,A){A.name=p,A.priority===void 0&&(A.priority=1),k[p]=A};L("text",{fn:function(p){return!0},priority:0}),L("required",{fn:function(p){return this.type==="radio"||this.type==="checkbox"?d(this):p!==void 0&&p.trim()!==""},priority:99,halt:!0}),L("email",{fn:function(p){return!p||R.test(p)}}),L("number",{fn:function(p){return!p||!isNaN(parseFloat(p))},priority:2}),L("integer",{fn:function(p){return!p||/^\d+$/.test(p)}}),L("minlength",{fn:function(p,A){return!p||p.length>=parseInt(A)}}),L("maxlength",{fn:function(p,A){return!p||p.length<=parseInt(A)}}),L("min",{fn:function(p,A){return!p||(this.type==="checkbox"?d(this)>=parseInt(A):parseFloat(p)>=parseFloat(A))}}),L("max",{fn:function(p,A){return!p||(this.type==="checkbox"?d(this)<=parseInt(A):parseFloat(p)<=parseFloat(A))}}),L("pattern",{fn:function(p,A){var h=A.match(new RegExp("^/(.*?)/([gimy]*)$"));return!p||new RegExp(h[1],h[2]).test(p)}}),L("equals",{fn:function(p,A){var h=document.querySelector(A);return h&&(!p&&!h.value||h.value===p)}});function J(w,p,A){var h=this;ae(w,p,A);function ae(f,S,y){f.setAttribute("novalidate","true"),h.form=f,h.config=g(S||{},P),h.live=y!==!1,h.fields=Array.from(f.querySelectorAll(N)).map(function(b){var x=[],T={},W={};return[].forEach.call(b.attributes,function(j){if(/^data-pristine-/.test(j.name)){var Z=j.name.substr(14),oe=Z.match(C);if(oe!==null){var fe=oe[1]===void 0?"en":oe[1];W.hasOwnProperty(fe)||(W[fe]={}),W[fe][Z.slice(0,Z.length-oe[0].length)]=j.value;return}Z==="type"&&(Z=j.value),X(x,T,Z,j.value)}else~G.indexOf(j.name)?X(x,T,j.name,j.value):j.name==="type"&&X(x,T,j.value)}),x.sort(function(j,Z){return Z.priority-j.priority}),h.live&&b.addEventListener(~["radio","checkbox"].indexOf(b.getAttribute("type"))?"change":"input",function(j){h.validate(j.target)}.bind(h)),b.pristine={input:b,validators:x,params:T,messages:W,self:h}}.bind(h))}function X(f,S,y,b){var x=k[y];if(x&&(f.push(x),b)){var T=y==="pattern"?[b]:b.split(",");T.unshift(null),S[y]=T}}h.validate=function(f,S){S=f&&S===!0||f===!0;var y=h.fields;f!==!0&&f!==!1&&(f instanceof HTMLElement?y=[f.pristine]:(f instanceof NodeList||f instanceof(window.$||Array)||f instanceof Array)&&(y=Array.from(f).map(function(W){return W.pristine})));for(var b=!0,x=0;y[x];x++){var T=y[x];Te(T)?!S&&ke(T):(b=!1,!S&&ge(T))}return b},h.getErrors=function(f){if(!f){for(var S=[],y=0;y<h.fields.length;y++){var b=h.fields[y];b.errors.length&&S.push({input:b.input,errors:b.errors})}return S}return f.tagName&&f.tagName.toLowerCase()==="select"?f.pristine.errors:f.length?f[0].pristine.errors:f.pristine.errors};function Te(f){for(var S=[],y=!0,b=0;f.validators[b];b++){var x=f.validators[b],T=f.params[x.name]?f.params[x.name]:[];if(T[0]=f.input.value,!x.fn.apply(f.input,T)&&(y=!1,typeof x.msg=="function"?S.push(x.msg(f.input.value,T)):typeof x.msg=="string"?S.push(a.apply(x.msg,T)):x.msg===Object(x.msg)&&x.msg[F]?S.push(a.apply(x.msg[F],T)):f.messages[F]&&f.messages[F][x.name]?S.push(a.apply(f.messages[F][x.name],T)):s[F]&&s[F][x.name]?S.push(a.apply(s[F][x.name],T)):S.push(a.apply(s[F].default,T)),x.halt===!0))break}return f.errors=S,y}h.addValidator=function(f,S,y,b,x){f instanceof HTMLElement?(f.pristine.validators.push({fn:S,msg:y,priority:b,halt:x}),f.pristine.validators.sort(function(T,W){return W.priority-T.priority})):console.warn("The parameter elem must be a dom element")};function ue(f){if(f.errorElements)return f.errorElements;var S=o(f.input,h.config.classTo),y=null,b=null;return h.config.classTo===h.config.errorTextParent?y=S:y=S.querySelector("."+h.config.errorTextParent),y&&(b=y.querySelector("."+v),b||(b=document.createElement(h.config.errorTextTag),b.className=v+" "+h.config.errorTextClass,y.appendChild(b),b.pristineDisplay=b.style.display)),f.errorElements=[S,b]}function ge(f){var S=ue(f),y=S[0],b=S[1],x=f.input,T=x.id||Math.floor(new Date().valueOf()*Math.random()),W="error-"+T;y&&(y.classList.remove(h.config.successClass),y.classList.add(h.config.errorClass),x.setAttribute("aria-describedby",W),x.setAttribute("aria-invalid","true")),b&&(b.setAttribute("id",W),b.setAttribute("role","alert"),b.innerHTML=f.errors.join("<br/>"),b.style.display=b.pristineDisplay||"")}h.addError=function(f,S){f=f.length?f[0]:f,f.pristine.errors.push(S),ge(f.pristine)};function De(f){var S=ue(f),y=S[0],b=S[1],x=f.input;return y&&(y.classList.remove(h.config.errorClass),y.classList.remove(h.config.successClass),x.removeAttribute("aria-describedby"),x.removeAttribute("aria-invalid")),b&&(b.removeAttribute("id"),b.removeAttribute("role"),b.innerHTML="",b.style.display="none"),S}function ke(f){var S=De(f)[0];S&&S.classList.add(h.config.successClass)}return h.reset=function(){for(var f=0;h.fields[f];f++)h.fields[f].errorElements=null;Array.from(h.form.querySelectorAll("."+v)).map(function(S){S.parentNode.removeChild(S)}),Array.from(h.form.querySelectorAll("."+h.config.classTo)).map(function(S){S.classList.remove(h.config.successClass),S.classList.remove(h.config.errorClass)})},h.destroy=function(){h.reset(),h.fields.forEach(function(f){delete f.input.pristine}),h.fields=[]},h.setGlobalConfig=function(f){P=f},h}return J.addValidator=function(w,p,A,h,ae){L(w,{fn:p,msg:A,priority:h,halt:ae})},J.addMessages=function(w,p){var A=s.hasOwnProperty(w)?s[w]:s[w]={};Object.keys(p).forEach(function(h,ae){A[h]=p[h]})},J.setLocale=function(w){F=w},J})})(It);var Zr=It.exports;const Yr=Wr(Zr),Jr=H.hashtags,Qr=/^#[A-Za-zА-Яа-я0-9]{1,19}$/,Pe=new Yr(H,{classTo:"img-upload__field-wrapper",errorTextParent:"img-upload__field-wrapper",errorTextTag:"span",errorTextClass:"text__error"});let se="";const en=t=>t.trim().toLowerCase().split(" ").filter(e=>!!e.length),tn=t=>new Set(t).size===t.length,rn=t=>{if(t.length===0)return!0;const e=en(t);return e.length>5?(se="Нельзя указать больше пяти хэш-тегов",!1):tn(e)?e.every(s=>s[0]!=="#"?(se="Хэш-тег должен начинаться с #",!1):s.length>20?(se="Хэш-тег должен быть не больше 20 символов",!1):s==="#"?(se="Хэш-тег не может состоять только из одной решетки",!1):Qr.test(s)?!0:(se="Хэш-тег может содержать только буквы и цифры",!1)):(se="Хэш-теги не должны повторяться",!1)};Pe.addValidator(Jr,rn,()=>se);const nn=()=>Pe.validate(),sn=()=>Pe.reset();H.addEventListener("submit",t=>{t.preventDefault(),Pe.validate()});var ee;(function(t){t.Range="range",t.Steps="steps",t.Positions="positions",t.Count="count",t.Values="values"})(ee||(ee={}));var K;(function(t){t[t.None=-1]="None",t[t.NoValue=0]="NoValue",t[t.LargeValue=1]="LargeValue",t[t.SmallValue=2]="SmallValue"})(K||(K={}));function an(t){return Ce(t)&&typeof t.from=="function"}function Ce(t){return typeof t=="object"&&typeof t.to=="function"}function pt(t){t.parentElement.removeChild(t)}function Ke(t){return t!=null}function vt(t){t.preventDefault()}function on(t){return t.filter(function(e){return this[e]?!1:this[e]=!0},{})}function ln(t,e){return Math.round(t/e)*e}function cn(t,e){var s=t.getBoundingClientRect(),o=t.ownerDocument,a=o.documentElement,d=Bt(o);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(d.x=0),e?s.top+d.y-a.clientTop:s.left+d.x-a.clientLeft}function Y(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function gt(t,e,s){s>0&&(B(t,e),setTimeout(function(){we(t,e)},s))}function St(t){return Math.max(Math.min(t,100),0)}function Le(t){return Array.isArray(t)?t:[t]}function un(t){t=String(t);var e=t.split(".");return e.length>1?e[1].length:0}function B(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function we(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function fn(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function Bt(t){var e=window.pageXOffset!==void 0,s=(t.compatMode||"")==="CSS1Compat",o=e?window.pageXOffset:s?t.documentElement.scrollLeft:t.body.scrollLeft,a=e?window.pageYOffset:s?t.documentElement.scrollTop:t.body.scrollTop;return{x:o,y:a}}function dn(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function mn(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch{}return t}function hn(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function et(t,e){return 100/(e-t)}function Xe(t,e,s){return e*100/(t[s+1]-t[s])}function pn(t,e){return Xe(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}function vn(t,e){return e*(t[1]-t[0])/100+t[0]}function pe(t,e){for(var s=1;t>=e[s];)s+=1;return s}function gn(t,e,s){if(s>=t.slice(-1)[0])return 100;var o=pe(s,t),a=t[o-1],d=t[o],g=e[o-1],P=e[o];return g+pn([a,d],s)/et(g,P)}function Sn(t,e,s){if(s>=100)return t.slice(-1)[0];var o=pe(s,e),a=t[o-1],d=t[o],g=e[o-1],P=e[o];return vn([a,d],(s-g)*et(g,P))}function En(t,e,s,o){if(o===100)return o;var a=pe(o,t),d=t[a-1],g=t[a];return s?o-d>(g-d)/2?g:d:e[a-1]?t[a-1]+ln(o-t[a-1],e[a-1]):o}var Gt=function(){function t(e,s,o){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[o||!1],this.xNumSteps=[!1],this.snap=s;var a,d=[];for(Object.keys(e).forEach(function(g){d.push([Le(e[g]),g])}),d.sort(function(g,P){return g[0][0]-P[0][0]}),a=0;a<d.length;a++)this.handleEntryPoint(d[a][1],d[a][0]);for(this.xNumSteps=this.xSteps.slice(0),a=0;a<this.xNumSteps.length;a++)this.handleStepPoint(a,this.xNumSteps[a])}return t.prototype.getDistance=function(e){for(var s=[],o=0;o<this.xNumSteps.length-1;o++)s[o]=Xe(this.xVal,e,o);return s},t.prototype.getAbsoluteDistance=function(e,s,o){var a=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[a+1];)a++;else e===this.xPct[this.xPct.length-1]&&(a=this.xPct.length-2);!o&&e===this.xPct[a+1]&&a++,s===null&&(s=[]);var d,g=1,P=s[a],v=0,N=0,G=0,R=0;for(o?d=(e-this.xPct[a])/(this.xPct[a+1]-this.xPct[a]):d=(this.xPct[a+1]-e)/(this.xPct[a+1]-this.xPct[a]);P>0;)v=this.xPct[a+1+R]-this.xPct[a+R],s[a+R]*g+100-d*100>100?(N=v*d,g=(P-100*d)/s[a+R],d=1):(N=s[a+R]*v/100*g,g=0),o?(G=G-N,this.xPct.length+R>=1&&R--):(G=G+N,this.xPct.length-R>=1&&R++),P=s[a+R]*g;return e+G},t.prototype.toStepping=function(e){return e=gn(this.xVal,this.xPct,e),e},t.prototype.fromStepping=function(e){return Sn(this.xVal,this.xPct,e)},t.prototype.getStep=function(e){return e=En(this.xPct,this.xSteps,this.snap,e),e},t.prototype.getDefaultStep=function(e,s,o){var a=pe(e,this.xPct);return(e===100||s&&e===this.xPct[a-1])&&(a=Math.max(a-1,1)),(this.xVal[a]-this.xVal[a-1])/o},t.prototype.getNearbySteps=function(e){var s=pe(e,this.xPct);return{stepBefore:{startValue:this.xVal[s-2],step:this.xNumSteps[s-2],highestStep:this.xHighestCompleteStep[s-2]},thisStep:{startValue:this.xVal[s-1],step:this.xNumSteps[s-1],highestStep:this.xHighestCompleteStep[s-1]},stepAfter:{startValue:this.xVal[s],step:this.xNumSteps[s],highestStep:this.xHighestCompleteStep[s]}}},t.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(un);return Math.max.apply(null,e)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(e){return this.getStep(this.toStepping(e))},t.prototype.handleEntryPoint=function(e,s){var o;if(e==="min"?o=0:e==="max"?o=100:o=parseFloat(e),!Y(o)||!Y(s[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(o),this.xVal.push(s[0]);var a=Number(s[1]);o?this.xSteps.push(isNaN(a)?!1:a):isNaN(a)||(this.xSteps[0]=a),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(e,s){if(s){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=Xe([this.xVal[e],this.xVal[e+1]],s,0)/et(this.xPct[e],this.xPct[e+1]);var o=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],a=Math.ceil(Number(o.toFixed(3))-1),d=this.xVal[e]+this.xNumSteps[e]*a;this.xHighestCompleteStep[e]=d}},t}(),Et={to:function(t){return t===void 0?"":t.toFixed(2)},from:Number},Kt={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},Q={tooltips:".__tooltips",aria:".__aria"};function bn(t,e){if(!Y(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function wn(t,e){if(!Y(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function xn(t,e){if(!Y(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function yn(t,e){if(!Y(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function Cn(t,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new Gt(e,t.snap||!1,t.singleStep)}function An(t,e){if(e=Le(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function _n(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function Pn(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function Ln(t,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function Tn(t,e){var s=[!1],o;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(o=1;o<t.handles;o++)s.push(e);s.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");s=e}t.connect=s}function Dn(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function Xt(t,e){if(!Y(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(t.margin=t.spectrum.getDistance(e))}function kn(t,e){if(!Y(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function On(t,e){var s;if(!Y(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||Y(e[0])||Y(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],s=0;s<t.spectrum.xNumSteps.length-1;s++)if(t.padding[0][s]<0||t.padding[1][s]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var o=e[0]+e[1],a=t.spectrum.xVal[0],d=t.spectrum.xVal[t.spectrum.xVal.length-1];if(o/(d-a)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function Vn(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function Mn(t,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var s=e.indexOf("tap")>=0,o=e.indexOf("drag")>=0,a=e.indexOf("fixed")>=0,d=e.indexOf("snap")>=0,g=e.indexOf("hover")>=0,P=e.indexOf("unconstrained")>=0,v=e.indexOf("drag-all")>=0,N=e.indexOf("smooth-steps")>=0;if(a){if(t.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");Xt(t,t.start[1]-t.start[0])}if(P&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:s||d,drag:o,dragAll:v,smoothSteps:N,fixed:a,snap:d,hover:g,unconstrained:P}}function Rn(t,e){if(e!==!1)if(e===!0||Ce(e)){t.tooltips=[];for(var s=0;s<t.handles;s++)t.tooltips.push(e)}else{if(e=Le(e),e.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(o){if(typeof o!="boolean"&&!Ce(o))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),t.tooltips=e}}function qn(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function Fn(t,e){if(!Ce(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function Un(t,e){if(!an(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function Hn(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function Nn(t,e){t.documentElement=e}function zn(t,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function $n(t,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof t.cssPrefix=="string"?(t.cssClasses={},Object.keys(e).forEach(function(s){t.cssClasses[s]=t.cssPrefix+e[s]})):t.cssClasses=e}function Wt(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:Et,format:Et},s={step:{r:!1,t:bn},keyboardPageMultiplier:{r:!1,t:wn},keyboardMultiplier:{r:!1,t:xn},keyboardDefaultStep:{r:!1,t:yn},start:{r:!0,t:An},connect:{r:!0,t:Tn},direction:{r:!0,t:Vn},snap:{r:!1,t:_n},animate:{r:!1,t:Pn},animationDuration:{r:!1,t:Ln},range:{r:!0,t:Cn},orientation:{r:!1,t:Dn},margin:{r:!1,t:Xt},limit:{r:!1,t:kn},padding:{r:!1,t:On},behaviour:{r:!0,t:Mn},ariaFormat:{r:!1,t:Fn},format:{r:!1,t:Un},tooltips:{r:!1,t:Rn},keyboardSupport:{r:!0,t:Hn},documentElement:{r:!1,t:Nn},cssPrefix:{r:!0,t:zn},cssClasses:{r:!0,t:$n},handleAttributes:{r:!1,t:qn}},o={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:Kt,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(s).forEach(function(v){if(!Ke(t[v])&&o[v]===void 0){if(s[v].r)throw new Error("noUiSlider: '"+v+"' is required.");return}s[v].t(e,Ke(t[v])?t[v]:o[v])}),e.pips=t.pips;var a=document.createElement("div"),d=a.style.msTransform!==void 0,g=a.style.transform!==void 0;e.transformRule=g?"transform":d?"msTransform":"webkitTransform";var P=[["left","top"],["right","bottom"]];return e.style=P[e.dir][e.ort],e}function jn(t,e,s){var o=dn(),a=hn(),d=a&&mn(),g=t,P,v,N,G,R,C=e.spectrum,F=[],k=[],L=[],J=0,w={},p=t.ownerDocument,A=e.documentElement||p.documentElement,h=p.body,ae=p.dir==="rtl"||e.ort===1?0:100;function X(r,n){var i=p.createElement("div");return n&&B(i,n),r.appendChild(i),i}function Te(r,n){var i=X(r,e.cssClasses.origin),l=X(i,e.cssClasses.handle);if(X(l,e.cssClasses.touchArea),l.setAttribute("data-handle",String(n)),e.keyboardSupport&&(l.setAttribute("tabindex","0"),l.addEventListener("keydown",function(c){return sr(c,n)})),e.handleAttributes!==void 0){var u=e.handleAttributes[n];Object.keys(u).forEach(function(c){l.setAttribute(c,u[c])})}return l.setAttribute("role","slider"),l.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),n===0?B(l,e.cssClasses.handleLower):n===e.handles-1&&B(l,e.cssClasses.handleUpper),i.handle=l,i}function ue(r,n){return n?X(r,e.cssClasses.connect):!1}function ge(r,n){var i=X(n,e.cssClasses.connects);v=[],N=[],N.push(ue(i,r[0]));for(var l=0;l<e.handles;l++)v.push(Te(n,l)),L[l]=l,N.push(ue(i,r[l+1]))}function De(r){B(r,e.cssClasses.target),e.dir===0?B(r,e.cssClasses.ltr):B(r,e.cssClasses.rtl),e.ort===0?B(r,e.cssClasses.horizontal):B(r,e.cssClasses.vertical);var n=getComputedStyle(r).direction;return n==="rtl"?B(r,e.cssClasses.textDirectionRtl):B(r,e.cssClasses.textDirectionLtr),X(r,e.cssClasses.base)}function ke(r,n){return!e.tooltips||!e.tooltips[n]?!1:X(r.firstChild,e.cssClasses.tooltip)}function f(){return g.hasAttribute("disabled")}function S(r){var n=v[r];return n.hasAttribute("disabled")}function y(r){r!=null?(v[r].setAttribute("disabled",""),v[r].handle.removeAttribute("tabindex")):(g.setAttribute("disabled",""),v.forEach(function(n){n.handle.removeAttribute("tabindex")}))}function b(r){r!=null?(v[r].removeAttribute("disabled"),v[r].handle.setAttribute("tabindex","0")):(g.removeAttribute("disabled"),v.forEach(function(n){n.removeAttribute("disabled"),n.handle.setAttribute("tabindex","0")}))}function x(){R&&(de("update"+Q.tooltips),R.forEach(function(r){r&&pt(r)}),R=null)}function T(){x(),R=v.map(ke),qe("update"+Q.tooltips,function(r,n,i){if(!(!R||!e.tooltips)&&R[n]!==!1){var l=r[n];e.tooltips[n]!==!0&&(l=e.tooltips[n].to(i[n])),R[n].innerHTML=l}})}function W(){de("update"+Q.aria),qe("update"+Q.aria,function(r,n,i,l,u){L.forEach(function(c){var E=v[c],m=Se(k,c,0,!0,!0,!0),O=Se(k,c,100,!0,!0,!0),D=u[c],V=String(e.ariaFormat.to(i[c]));m=C.fromStepping(m).toFixed(1),O=C.fromStepping(O).toFixed(1),D=C.fromStepping(D).toFixed(1),E.children[0].setAttribute("aria-valuemin",m),E.children[0].setAttribute("aria-valuemax",O),E.children[0].setAttribute("aria-valuenow",D),E.children[0].setAttribute("aria-valuetext",V)})})}function j(r){if(r.mode===ee.Range||r.mode===ee.Steps)return C.xVal;if(r.mode===ee.Count){if(r.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var n=r.values-1,i=100/n,l=[];n--;)l[n]=n*i;return l.push(100),Z(l,r.stepped)}return r.mode===ee.Positions?Z(r.values,r.stepped):r.mode===ee.Values?r.stepped?r.values.map(function(u){return C.fromStepping(C.getStep(C.toStepping(u)))}):r.values:[]}function Z(r,n){return r.map(function(i){return C.fromStepping(n?C.getStep(i):i)})}function oe(r){function n(D,V){return Number((D+V).toFixed(7))}var i=j(r),l={},u=C.xVal[0],c=C.xVal[C.xVal.length-1],E=!1,m=!1,O=0;return i=on(i.slice().sort(function(D,V){return D-V})),i[0]!==u&&(i.unshift(u),E=!0),i[i.length-1]!==c&&(i.push(c),m=!0),i.forEach(function(D,V){var M,_,U,I=D,z=i[V+1],$,He,Ne,ze,ut,$e,ft,dt=r.mode===ee.Steps;for(dt&&(M=C.xNumSteps[V]),M||(M=z-I),z===void 0&&(z=I),M=Math.max(M,1e-7),_=I;_<=z;_=n(_,M)){for($=C.toStepping(_),He=$-O,ut=He/(r.density||1),$e=Math.round(ut),ft=He/$e,U=1;U<=$e;U+=1)Ne=O+U*ft,l[Ne.toFixed(5)]=[C.fromStepping(Ne),0];ze=i.indexOf(_)>-1?K.LargeValue:dt?K.SmallValue:K.NoValue,!V&&E&&_!==z&&(ze=0),_===z&&m||(l[$.toFixed(5)]=[_,ze]),O=$}}),l}function fe(r,n,i){var l,u,c=p.createElement("div"),E=(l={},l[K.None]="",l[K.NoValue]=e.cssClasses.valueNormal,l[K.LargeValue]=e.cssClasses.valueLarge,l[K.SmallValue]=e.cssClasses.valueSub,l),m=(u={},u[K.None]="",u[K.NoValue]=e.cssClasses.markerNormal,u[K.LargeValue]=e.cssClasses.markerLarge,u[K.SmallValue]=e.cssClasses.markerSub,u),O=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],D=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];B(c,e.cssClasses.pips),B(c,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);function V(_,U){var I=U===e.cssClasses.value,z=I?O:D,$=I?E:m;return U+" "+z[e.ort]+" "+$[_]}function M(_,U,I){if(I=n?n(U,I):I,I!==K.None){var z=X(c,!1);z.className=V(I,e.cssClasses.marker),z.style[e.style]=_+"%",I>K.NoValue&&(z=X(c,!1),z.className=V(I,e.cssClasses.value),z.setAttribute("data-value",String(U)),z.style[e.style]=_+"%",z.innerHTML=String(i.to(U)))}}return Object.keys(r).forEach(function(_){M(_,r[_][0],r[_][1])}),c}function Oe(){G&&(pt(G),G=null)}function Ve(r){Oe();var n=oe(r),i=r.filter,l=r.format||{to:function(u){return String(Math.round(u))}};return G=g.appendChild(fe(n,i,l)),G}function rt(){var r=P.getBoundingClientRect(),n="offset"+["Width","Height"][e.ort];return e.ort===0?r.width||P[n]:r.height||P[n]}function re(r,n,i,l){var u=function(E){var m=Jt(E,l.pageOffset,l.target||n);if(!m||f()&&!l.doNotReject||fn(g,e.cssClasses.tap)&&!l.doNotReject||r===o.start&&m.buttons!==void 0&&m.buttons>1||l.hover&&m.buttons)return!1;d||m.preventDefault(),m.calcPoint=m.points[e.ort],i(m,l)},c=[];return r.split(" ").forEach(function(E){n.addEventListener(E,u,d?{passive:!0}:!1),c.push([E,u])}),c}function Jt(r,n,i){var l=r.type.indexOf("touch")===0,u=r.type.indexOf("mouse")===0,c=r.type.indexOf("pointer")===0,E=0,m=0;if(r.type.indexOf("MSPointer")===0&&(c=!0),r.type==="mousedown"&&!r.buttons&&!r.touches)return!1;if(l){var O=function(M){var _=M.target;return _===i||i.contains(_)||r.composed&&r.composedPath().shift()===i};if(r.type==="touchstart"){var D=Array.prototype.filter.call(r.touches,O);if(D.length>1)return!1;E=D[0].pageX,m=D[0].pageY}else{var V=Array.prototype.find.call(r.changedTouches,O);if(!V)return!1;E=V.pageX,m=V.pageY}}return n=n||Bt(p),(u||c)&&(E=r.clientX+n.x,m=r.clientY+n.y),r.pageOffset=n,r.points=[E,m],r.cursor=u||c,r}function nt(r){var n=r-cn(P,e.ort),i=n*100/rt();return i=St(i),e.dir?100-i:i}function Qt(r){var n=100,i=!1;return v.forEach(function(l,u){if(!S(u)){var c=k[u],E=Math.abs(c-r),m=E===100&&n===100,O=E<n,D=E<=n&&r>c;(O||D||m)&&(i=u,n=E)}}),i}function er(r,n){r.type==="mouseout"&&r.target.nodeName==="HTML"&&r.relatedTarget===null&&Me(r,n)}function tr(r,n){if(navigator.appVersion.indexOf("MSIE 9")===-1&&r.buttons===0&&n.buttonsProperty!==0)return Me(r,n);var i=(e.dir?-1:1)*(r.calcPoint-n.startCalcPoint),l=i*100/n.baseSize;st(i>0,l,n.locations,n.handleNumbers,n.connect)}function Me(r,n){n.handle&&(we(n.handle,e.cssClasses.active),J-=1),n.listeners.forEach(function(i){A.removeEventListener(i[0],i[1])}),J===0&&(we(g,e.cssClasses.drag),Ue(),r.cursor&&(h.style.cursor="",h.removeEventListener("selectstart",vt))),e.events.smoothSteps&&(n.handleNumbers.forEach(function(i){ne(i,k[i],!0,!0,!1,!1)}),n.handleNumbers.forEach(function(i){q("update",i)})),n.handleNumbers.forEach(function(i){q("change",i),q("set",i),q("end",i)})}function Re(r,n){if(!n.handleNumbers.some(S)){var i;if(n.handleNumbers.length===1){var l=v[n.handleNumbers[0]];i=l.children[0],J+=1,B(i,e.cssClasses.active)}r.stopPropagation();var u=[],c=re(o.move,A,tr,{target:r.target,handle:i,connect:n.connect,listeners:u,startCalcPoint:r.calcPoint,baseSize:rt(),pageOffset:r.pageOffset,handleNumbers:n.handleNumbers,buttonsProperty:r.buttons,locations:k.slice()}),E=re(o.end,A,Me,{target:r.target,handle:i,listeners:u,doNotReject:!0,handleNumbers:n.handleNumbers}),m=re("mouseout",A,er,{target:r.target,handle:i,listeners:u,doNotReject:!0,handleNumbers:n.handleNumbers});u.push.apply(u,c.concat(E,m)),r.cursor&&(h.style.cursor=getComputedStyle(r.target).cursor,v.length>1&&B(g,e.cssClasses.drag),h.addEventListener("selectstart",vt,!1)),n.handleNumbers.forEach(function(O){q("start",O)})}}function rr(r){r.stopPropagation();var n=nt(r.calcPoint),i=Qt(n);i!==!1&&(e.events.snap||gt(g,e.cssClasses.tap,e.animationDuration),ne(i,n,!0,!0),Ue(),q("slide",i,!0),q("update",i,!0),e.events.snap?Re(r,{handleNumbers:[i]}):(q("change",i,!0),q("set",i,!0)))}function nr(r){var n=nt(r.calcPoint),i=C.getStep(n),l=C.fromStepping(i);Object.keys(w).forEach(function(u){u.split(".")[0]==="hover"&&w[u].forEach(function(c){c.call(be,l)})})}function sr(r,n){if(f()||S(n))return!1;var i=["Left","Right"],l=["Down","Up"],u=["PageDown","PageUp"],c=["Home","End"];e.dir&&!e.ort?i.reverse():e.ort&&!e.dir&&(l.reverse(),u.reverse());var E=r.key.replace("Arrow",""),m=E===u[0],O=E===u[1],D=E===l[0]||E===i[0]||m,V=E===l[1]||E===i[1]||O,M=E===c[0],_=E===c[1];if(!D&&!V&&!M&&!_)return!0;r.preventDefault();var U;if(V||D){var I=D?0:1,z=ct(n),$=z[I];if($===null)return!1;$===!1&&($=C.getDefaultStep(k[n],D,e.keyboardDefaultStep)),O||m?$*=e.keyboardPageMultiplier:$*=e.keyboardMultiplier,$=Math.max($,1e-7),$=(D?-1:1)*$,U=F[n]+$}else _?U=e.spectrum.xVal[e.spectrum.xVal.length-1]:U=e.spectrum.xVal[0];return ne(n,C.toStepping(U),!0,!0),q("slide",n),q("update",n),q("change",n),q("set",n),!1}function ir(r){r.fixed||v.forEach(function(n,i){re(o.start,n.children[0],Re,{handleNumbers:[i]})}),r.tap&&re(o.start,P,rr,{}),r.hover&&re(o.move,P,nr,{hover:!0}),r.drag&&N.forEach(function(n,i){if(!(n===!1||i===0||i===N.length-1)){var l=v[i-1],u=v[i],c=[n],E=[l,u],m=[i-1,i];B(n,e.cssClasses.draggable),r.fixed&&(c.push(l.children[0]),c.push(u.children[0])),r.dragAll&&(E=v,m=L),c.forEach(function(O){re(o.start,O,Re,{handles:E,handleNumbers:m,connect:n})})}})}function qe(r,n){w[r]=w[r]||[],w[r].push(n),r.split(".")[0]==="update"&&v.forEach(function(i,l){q("update",l)})}function ar(r){return r===Q.aria||r===Q.tooltips}function de(r){var n=r&&r.split(".")[0],i=n?r.substring(n.length):r;Object.keys(w).forEach(function(l){var u=l.split(".")[0],c=l.substring(u.length);(!n||n===u)&&(!i||i===c)&&(!ar(c)||i===c)&&delete w[l]})}function q(r,n,i){Object.keys(w).forEach(function(l){var u=l.split(".")[0];r===u&&w[l].forEach(function(c){c.call(be,F.map(e.format.to),n,F.slice(),i||!1,k.slice(),be)})})}function Se(r,n,i,l,u,c,E){var m;return v.length>1&&!e.events.unconstrained&&(l&&n>0&&(m=C.getAbsoluteDistance(r[n-1],e.margin,!1),i=Math.max(i,m)),u&&n<v.length-1&&(m=C.getAbsoluteDistance(r[n+1],e.margin,!0),i=Math.min(i,m))),v.length>1&&e.limit&&(l&&n>0&&(m=C.getAbsoluteDistance(r[n-1],e.limit,!1),i=Math.min(i,m)),u&&n<v.length-1&&(m=C.getAbsoluteDistance(r[n+1],e.limit,!0),i=Math.max(i,m))),e.padding&&(n===0&&(m=C.getAbsoluteDistance(0,e.padding[0],!1),i=Math.max(i,m)),n===v.length-1&&(m=C.getAbsoluteDistance(100,e.padding[1],!0),i=Math.min(i,m))),E||(i=C.getStep(i)),i=St(i),i===r[n]&&!c?!1:i}function Fe(r,n){var i=e.ort;return(i?n:r)+", "+(i?r:n)}function st(r,n,i,l,u){var c=i.slice(),E=l[0],m=e.events.smoothSteps,O=[!r,r],D=[r,!r];l=l.slice(),r&&l.reverse(),l.length>1?l.forEach(function(M,_){var U=Se(c,M,c[M]+n,O[_],D[_],!1,m);U===!1?n=0:(n=U-c[M],c[M]=U)}):O=D=[!0];var V=!1;l.forEach(function(M,_){V=ne(M,i[M]+n,O[_],D[_],!1,m)||V}),V&&(l.forEach(function(M){q("update",M),q("slide",M)}),u!=null&&q("drag",E))}function it(r,n){return e.dir?100-r-n:r}function or(r,n){k[r]=n,F[r]=C.fromStepping(n);var i=it(n,0)-ae,l="translate("+Fe(i+"%","0")+")";v[r].style[e.transformRule]=l,at(r),at(r+1)}function Ue(){L.forEach(function(r){var n=k[r]>50?-1:1,i=3+(v.length+n*r);v[r].style.zIndex=String(i)})}function ne(r,n,i,l,u,c){return u||(n=Se(k,r,n,i,l,!1,c)),n===!1?!1:(or(r,n),!0)}function at(r){if(N[r]){var n=0,i=100;r!==0&&(n=k[r-1]),r!==N.length-1&&(i=k[r]);var l=i-n,u="translate("+Fe(it(n,l)+"%","0")+")",c="scale("+Fe(l/100,"1")+")";N[r].style[e.transformRule]=u+" "+c}}function ot(r,n){return r===null||r===!1||r===void 0||(typeof r=="number"&&(r=String(r)),r=e.format.from(r),r!==!1&&(r=C.toStepping(r)),r===!1||isNaN(r))?k[n]:r}function Ee(r,n,i){var l=Le(r),u=k[0]===void 0;n=n===void 0?!0:n,e.animate&&!u&&gt(g,e.cssClasses.tap,e.animationDuration),L.forEach(function(m){ne(m,ot(l[m],m),!0,!1,i)});var c=L.length===1?0:1;if(u&&C.hasNoSize()&&(i=!0,k[0]=0,L.length>1)){var E=100/(L.length-1);L.forEach(function(m){k[m]=m*E})}for(;c<L.length;++c)L.forEach(function(m){ne(m,k[m],!0,!0,i)});Ue(),L.forEach(function(m){q("update",m),l[m]!==null&&n&&q("set",m)})}function lr(r){Ee(e.start,r)}function cr(r,n,i,l){if(r=Number(r),!(r>=0&&r<L.length))throw new Error("noUiSlider: invalid handle number, got: "+r);ne(r,ot(n,r),!0,!0,l),q("update",r),i&&q("set",r)}function lt(r){if(r===void 0&&(r=!1),r)return F.length===1?F[0]:F.slice(0);var n=F.map(e.format.to);return n.length===1?n[0]:n}function ur(){for(de(Q.aria),de(Q.tooltips),Object.keys(e.cssClasses).forEach(function(r){we(g,e.cssClasses[r])});g.firstChild;)g.removeChild(g.firstChild);delete g.noUiSlider}function ct(r){var n=k[r],i=C.getNearbySteps(n),l=F[r],u=i.thisStep.step,c=null;if(e.snap)return[l-i.stepBefore.startValue||null,i.stepAfter.startValue-l||null];u!==!1&&l+u>i.stepAfter.startValue&&(u=i.stepAfter.startValue-l),l>i.thisStep.startValue?c=i.thisStep.step:i.stepBefore.step===!1?c=!1:c=l-i.stepBefore.highestStep,n===100?u=null:n===0&&(c=null);var E=C.countStepDecimals();return u!==null&&u!==!1&&(u=Number(u.toFixed(E))),c!==null&&c!==!1&&(c=Number(c.toFixed(E))),[c,u]}function fr(){return L.map(ct)}function dr(r,n){var i=lt(),l=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];l.forEach(function(c){r[c]!==void 0&&(s[c]=r[c])});var u=Wt(s);l.forEach(function(c){r[c]!==void 0&&(e[c]=u[c])}),C=u.spectrum,e.margin=u.margin,e.limit=u.limit,e.padding=u.padding,e.pips?Ve(e.pips):Oe(),e.tooltips?T():x(),k=[],Ee(Ke(r.start)?r.start:i,n)}function mr(){P=De(g),ge(e.connect,P),ir(e.events),Ee(e.start),e.pips&&Ve(e.pips),e.tooltips&&T(),W()}mr();var be={destroy:ur,steps:fr,on:qe,off:de,get:lt,set:Ee,setHandle:cr,reset:lr,disable:y,enable:b,__moveHandles:function(r,n,i){st(r,n,k,i)},options:s,updateOptions:dr,target:g,removePips:Oe,removeTooltips:x,getPositions:function(){return k.slice()},getTooltips:function(){return R},getOrigins:function(){return v},pips:Ve};return be}function In(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var s=Wt(e),o=jn(t,s,e);return t.noUiSlider=o,o}const Bn={__spectrum:Gt,cssClasses:Kt,create:In};const Ae=(t=0,e=100,s=1,o=e)=>({range:{min:t,max:e},start:o,step:s}),bt=Ae(),wt=Ae(0,1,.1),tt={none:{slider:bt},chrome:{slider:wt,filter:t=>`grayscale(${t})`},sepia:{slider:wt,filter:t=>`sepia(${t})`},marvin:{slider:bt,filter:t=>`invert(${t}%)`},phobos:{slider:Ae(0,3,.1),filter:t=>`blur(${t}px)`},heat:{slider:Ae(1,3,.1),filter:t=>`brightness(${t})`}},Gn=new Event("change"),We=Bn.create(zt,{...tt.none.slider,connect:"lower"});Nt.hidden=!0;Je.addEventListener("change",()=>{const t=H.effect.value;Nt.hidden=t==="none",We.updateOptions(tt[t].slider,!0)});We.on("update",()=>{const t=We.get();H["effect-level"].value=String(t);const e=H.effect.value;if(e==="none")return ce.style.removeProperty("filter");const s=tt[e].filter;ce.style.filter=s(t)});const Kn=()=>{H.effect.value="none",Je.dispatchEvent(Gn)},Xn=["jpg","jpeg","png"],Wn=t=>{const e=t.name.toLowerCase();if(!Xn.some(a=>e.endsWith(a)))return;const o=URL.createObjectURL(t);ce.src=o,$r.forEach(a=>{a.style.backgroundImage=`url(${o})`})},Zn=document.querySelector(".img-upload__form");if(!H)throw new Error("Critical form element were not found");const Zt=()=>H.reset();H.filename.addEventListener("change",()=>{_e(Ye),document.addEventListener("keydown",Yt);const t=H.filename.files[0];Wn(t)});H.addEventListener("reset",()=>{_e(Ye,!1),document.removeEventListener("keydown",Yt),sn(),Kr(),Kn()});const Yn=()=>{he.disabled=!0,he.textContent="Публикация..."},xt=()=>{he.disabled=!1,he.textContent="Опубликовать"};H.addEventListener("submit",t=>{if(t.preventDefault(),nn()){const e=new FormData(Zn);Yn(),Pr(e).then(()=>{Ge("success"),Zt(),xt()}).catch(()=>{Ge("error"),xt()})}});function Yt(t){const e=H.hashtags===document.activeElement||H.description===document.activeElement,s=!!document.querySelector(".error");Ze(t)&&!e&&!s&&Zt()}const Jn=500;_r().then(t=>{ht(t),zr(pr(ht,Jn),t)}).catch(()=>{Ge("dataError")});
